<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Toko Overnight Oat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        header {
            background: #28a745;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .produk {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px;
            margin-top: 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        .hapus-btn {
            background-color: #dc3545;
            margin-left: 10px;
        }
        #keranjang {
            margin-top: 40px;
            border-top: 2px solid #ddd;
            padding-top: 20px;
        }
    </style>
</head>
<body>

    <header>
        <h1>Toko Overnight Oat</h1>
    </header>

    <div class="produk" id="produk-container">
        <!-- Produk akan dimuat di sini -->
    </div>

    <div id="keranjang">
        <h2>üõí Keranjang Belanja</h2>
        <ul id="daftar-keranjang"></ul>
        <p><strong>Total:</strong> Rp <span id="total">0</span></p>
        <a id="checkout-wa" href="#" target="_blank">
            <button>Checkout via WhatsApp</button>
        </a>
    </div>

    <script>
        let keranjang = [];
        let total = 0;

        function tambahKeranjang(nama, harga) {
            keranjang.push({ nama, harga });
            updateKeranjang();
        }

        function hapusItem(index) {
            total -= keranjang[index].harga;
            keranjang.splice(index, 1);
            updateKeranjang();
        }

        function updateKeranjang() {
            const daftar = document.getElementById('daftar-keranjang');
            daftar.innerHTML = '';
            keranjang.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `${item.nama} - Rp ${item.harga.toLocaleString()} 
                    <button class="hapus-btn" onclick="hapusItem(${index})">‚ùå</button>`;
                daftar.appendChild(li);
            });

            total = keranjang.reduce((acc, item) => acc + item.harga, 0);
            document.getElementById('total').innerText = total.toLocaleString();

            // Update link WhatsApp
            let pesan = "Halo, saya ingin memesan:\n";
            keranjang.forEach(item => {
                pesan += `- ${item.nama} (Rp ${item.harga.toLocaleString()})\n`;
            });
            pesan += `Total: Rp ${total.toLocaleString()}`;

            const noWA = "6281234567890"; // Ganti dengan nomor kamu
            const link = `https://wa.me/${noWA}?text=${encodeURIComponent(pesan)}`;
            document.getElementById('checkout-wa').href = link;
        }

        function tampilkanProduk() {
            const produkContainer = document.getElementById('produk-container');
            produkContainer.innerHTML = '';

            let produk = JSON.parse(localStorage.getItem('produk')) || [];

            if (produk.length === 0) {
                produkContainer.innerHTML = "<p>Belum ada produk. Tambahkan dari admin.</p>";
                return;
            }

            produk.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
    <img src="${item.gambar}" alt="${item.nama}" style="max-width:100%; border-radius:10px;">
    <h3>${item.nama}</h3>
    <p>Rp ${item.harga.toLocaleString()}</p>
    <button onclick="tambahKeranjang('${item.nama}', ${item.harga})">Tambah ke Keranjang</button>
`;

                produkContainer.appendChild(card);
            });
        }

        tampilkanProduk();
    </script>

</body>
</html>
